namespace WinFormsApp1;

public static class MathService
{
    private static readonly double[,] Xi = new double[8, 8]
    {
        {0.5, 0, 0, 0, 0, 0, 0, 0},
        {-0.577350, 0.577350, 0, 0, 0, 0, 0, 0},
        {-0.774597, 0, 0.774597, 0, 0, 0, 0, 0},
        {-0.861136, -0.339981, 0.339981, 0.861136, 0, 0, 0, 0},
        {-0.906180, -0.538470, 0, 0.538470, 0.906180, 0, 0, 0},
        {-0.932470, -0.661210, -0.238620, 0.238620, 0.661210, 0.932470, 0, 0},
        {-0.949108, -0.741531, -0.405845, 0, 0.405845, 0.741531, 0.949108, 0},
        {-0.960290, -0.796666, -0.525532, -0.183434, 0.183434, 0.525532, 0.796666, 0.960290}
    };

    private static readonly double[,] Ci = new double[8, 8]
    {
        {2, 0, 0, 0, 0, 0, 0, 0 },
        {1, 1, 0, 0, 0, 0, 0, 0},
        {0.555555, 0.888889, 0.555555, 0, 0, 0, 0, 0 },
        {0.347855, 0.652145, 0.652145, 0.347855,0, 0, 0, 0},
        {0.236927, 0.478629, 0.568889, 0.478629, 0.236927,0, 0, 0},
        {0.171324, 0.360761, 0.467914, 0.467914, 0.360761, 0.171324, 0, 0},
        {0.129485, 0.279705, 0.381830, 0.417960, 0.381830, 0.279705, 0.129485, 0},
        {0.101228, 0.222381, 0.313707, 0.362684, 0.362684, 0.313707, 0.222381, 0.101228}
    };


    public static double CalculateChebyshevQuadrature(double a, double b, int n, Func<double, double> f)
    {
        var sum = 0d;

        for (int i = 0; i < n; i++)
        {
            double k = (a + b) / 2 + ((b - a) / 2) * Xi[n - 1, i];

            sum += f(k) * Ci[n - 1, i];
        }

        var result = (b - a) / 2 * sum;

        return result;
    }
}
